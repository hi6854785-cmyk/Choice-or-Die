<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Choice or Die</title>
<style>
body { margin:0; background:black; color:white; text-align:center; }
button { padding:15px; font-size:18px; margin-top:20px; width:90%; }
</style>
</head>

<body>

<h2>당신은 이미 선택했습니다</h2>
<button id="startBtn">시작</button>

<script>
let audioCtx;
let bgSource;
let screamBuffer;

async function loadSound(url) {
  const res = await fetch(url);
  const data = await res.arrayBuffer();
  return await audioCtx.decodeAudioData(data);
}

document.getElementById("startBtn").onclick = async () => {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  const bgBuffer = await loadSound("bg.mp3");
  screamBuffer = await loadSound("scream.mp3");

  bgSource = audioCtx.createBufferSource();
  bgSource.buffer = bgBuffer;
  bgSource.loop = true;

  const gain = audioCtx.createGain();
  gain.gain.value = 0.6;

  bgSource.connect(gain).connect(audioCtx.destination);
  bgSource.start(0);

  document.body.innerHTML = "<h1>질문 1</h1><button onclick='scream()'>잘못된 선택</button>";
};

function scream() {
  const src = audioCtx.createBufferSource();
  src.buffer = screamBuffer;
  src.connect(audioCtx.destination);
  src.start();
}
</script>

</body>
</html>

